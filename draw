#!/usr/local/bin/wish8.6

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see <http://www.gnu.org/licenses/>.
#
# Copyrigth Â© Alexander Ben Nasrallah 2017, 2018 <abn@posteo.de>

canvas .demo -width 1024 -height 512 -background white
button .end -text "done" -command exit

pack .demo .end -fill both -expand true

#.demo create rect 25 25 325 75 \
	#-fill blue
#.demo create text 175 50 \
	#-text "Initial String of Text" \
	#-fill yellow

proc drawdot {x y color} {
	.demo create line $x $y  [expr $x + 1] [expr $y + 1]  -fill $color
}

proc redraw {} {
	for {set i 0} {$i < 15000} {incr i} {
		gets stdin row
		if { [eof stdin] } { return };
		lassign [regexp -all -inline {[^,]+} $row] x y color
		drawdot $x $y $color
	}

	update idletasks
	after 1 redraw
}

set count 0
set fps 30
set lastdrawtime [expr {[clock milliseconds] + 0}]
set reading falsd

redraw
